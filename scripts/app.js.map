{"version":3,"sources":["app/app.module.coffee","app/cozydb-browser.js","app/scripts/Home.Ctrl.coffee"],"names":[],"mappings":"AAAA;;AAAA,EAA4B,CAAhB,MAAZ,IAAY;CACV;AAAA;CACE,MAAO;CAAP,CAC0B,EAA1B,OAAsC,GAAxB;CAFhB;CAAA,CAGA,YAAc;CAAW,CAAY,CAAZ;CAHzB,GAGA;CAHA,CAIA,KAAO,KAAP;CALU;;AAQZ,CARA,CAQ6B,IAA7B,CAAO,EAAsB,GAA7B;;AAIA,CAZA,EAYc,QAAd;CAAc;CACZ,CAAa,EAAb;CAAA,CACY,EAAZ,SADA;CAAA,CAEc,EAAd,EAFA,MAEA;GAHY;CAZd;;AAgBA,CAhBA,CAkBE,CAFkB,IAApB,EAAS,MAAW;CChBpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/tBA;;AAAA,EAAuB,CAAT,MAAC,CAAD,CAAd;CACE;CAAA,EAAK,CAAL;CAAA,CAEA,EAAM,KAAC;CACL;CAAA,MAAO,SAAP;CAAA,CAEE,CADQ,CAAV,EAAgB,CAAhB,CAAU;CACR;CAAA,CACG,IAAH;CADA,CAEK,CAAL;CAFA,CAGO,GAAP;CAHA,CAIY,IAAZ;CAJA,CAKM,EAAN;CALA,CAMU,IAAV;CANA,CAOK,CAAL;CAPA,CAQM,EAAN;CAVF,KACU;CADV,CAWqB,EAArB,GAAO,EAAe;CACpB,GAAG,EAAH;CACE;MADF;CAGE,MAAO,CAAP;CAAA,EACA,IAAO,CAAP;CADA,CAEmB,CAAN,CAAb,GAAO,CAAP,CAAc;CACZ,MAAO,GAAP;CAAA,EACA,IAAO,CAAP;CADA,EAEA,IAAO,GAAP;CAHF,QAAa;CAFb,EAOc,GAAR,EAAN,CAAc;CACZ,EAAkB,GAAZ,EAAN;CAAA,CACE,CAAY,KAAd;CAFF,QAAc;OAXG;CAArB,IAAqB;CAXrB,EA2BA,IAAO,MAAP;CA9BF,EAEM;CAFN,CAiCA;CAlCY;;AAqCd,CArCA,CAqCuD,IAAvD,CAAO,GAAP;;AACA,CAtCA,CAwCE,CAFoB,IAAtB,CAAsB,GAAX,CAAW","file":"scripts/app.js","sourcesContent":["appConfig = ($httpProvider, $routeProvider) ->\n  for path of routeObject\n    console.log path\n    $routeProvider.when path, routeObject[path]\n  $routeProvider.otherwise redirectTo: '/'\n  console.log 'app config'\n  return\n\nangular.module('browserapp', [\n  'ngResource'\n  'ngRoute'\n]).config appConfig\nrouteObject = '/':\n  templateUrl: 'partials/home.html'\n  controller: 'HomeAngCtrl'\n  controllerAs: 'home'\nappConfig.$inject = [\n  '$httpProvider'\n  '$routeProvider'\n]","(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.cozydb = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n// Generated by CoffeeScript 1.10.0\n(function() {\n  var CozyBackedModel, Model, client, cozyDataAdapter,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  client = require('./utils/client');\n\n  Model = require('./model');\n\n  cozyDataAdapter = {\n    find: function(id, callback) {\n      return client.get(\"data/\", id, function(error, response) {\n        if (error) {\n          return callback(error);\n        } else if (response.statusCode === 404) {\n          return callback(null, null);\n        } else {\n          return callback(null, response);\n        }\n      });\n    },\n    create: function(attributes, callback) {\n      var path;\n      path = \"data/\";\n      if (attributes.id != null) {\n        path += attributes.id + \"/\";\n        delete attributes.id;\n        return callback(new Error('cant create an object with a set id'));\n      }\n      return client.post(path, attributes, function(error, response) {\n        if (error) {\n          return callback(error);\n        } else {\n          response.id = response._id;\n          return callback(null, response);\n        }\n      });\n    }\n  };\n\n  module.exports = CozyBackedModel = (function(superClass) {\n    extend(CozyBackedModel, superClass);\n\n    function CozyBackedModel() {\n      return CozyBackedModel.__super__.constructor.apply(this, arguments);\n    }\n\n    CozyBackedModel.adapter = cozyDataAdapter;\n\n    CozyBackedModel.cast = function() {\n      if (!this.__addedToSchema) {\n        this.__addedToSchema = true;\n        this.schema._id = String;\n        this.schema._attachments = Object;\n        this.schema._rev = String;\n        this.schema.id = String;\n        this.schema.docType = String;\n      }\n      return CozyBackedModel.__super__.constructor.cast.apply(this, arguments);\n    };\n\n    return CozyBackedModel;\n\n  })(Model);\n\n}).call(this);\n\n},{\"./model\":3,\"./utils/client\":4}],2:[function(require,module,exports){\n// Generated by CoffeeScript 1.10.0\n(function() {\n  var CozyModel, Model, NoSchema,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  module.exports.Model = Model = require('./model');\n\n  module.exports.CozyModel = CozyModel = require('./cozymodel');\n\n  NoSchema = require('./utils/type_checking').NoSchema;\n\n  module.exports.NoSchema = NoSchema;\n\n  module.exports.getModel = function(name, schema) {\n    var ClassFromGetModel, klass;\n    window.parent.postMessage({\n      action: 'getToken'\n    }, '*');\n    klass = ClassFromGetModel = (function(superClass) {\n      extend(ClassFromGetModel, superClass);\n\n      function ClassFromGetModel() {\n        return ClassFromGetModel.__super__.constructor.apply(this, arguments);\n      }\n\n      ClassFromGetModel.schema = schema;\n\n      return ClassFromGetModel;\n\n    })(CozyModel);\n    klass.displayName = klass.name = name;\n    klass.toString = function() {\n      return name + \"Constructor\";\n    };\n    klass.docType = name;\n    return klass;\n  };\n\n}).call(this);\n\n},{\"./cozymodel\":1,\"./model\":3,\"./utils/type_checking\":5}],3:[function(require,module,exports){\n// Generated by CoffeeScript 1.10.0\n(function() {\n  var Model, castObject,\n    hasProp = {}.hasOwnProperty;\n\n  Model = (function() {\n    Model.getDocType = function() {\n      var ref;\n      return ((ref = this.docType) != null ? ref.toLowerCase() : void 0) || this.name.toLowerCase();\n    };\n\n    Model.find = function(id, callback) {\n      return this.adapter.find(id, (function(_this) {\n        return function(err, attributes) {\n          var ref;\n          if (err) {\n            return callback(err);\n          } else if ((attributes != null ? (ref = attributes.docType) != null ? ref.toLowerCase() : void 0 : void 0) !== _this.getDocType()) {\n            return callback(null, null);\n          } else {\n            return callback(null, new _this(attributes));\n          }\n        };\n      })(this));\n    };\n\n    Model.create = function(data, callback) {\n      data.docType = this.getDocType();\n      data = this.cast(data);\n      return this.adapter.create(data, (function(_this) {\n        return function(err, attributes) {\n          if (err) {\n            return callback(err);\n          }\n          return callback(null, attributes);\n        };\n      })(this));\n    };\n\n    Model.cast = function(attributes, target) {\n      if (target == null) {\n        target = {};\n      }\n      return castObject(attributes, this.schema, target, this.name);\n    };\n\n    function Model(attributes) {\n      if (attributes == null) {\n        attributes = {};\n      }\n      this.constructor.cast(attributes, this);\n      if (attributes._id) {\n        if (this.id == null) {\n          this.id = attributes._id;\n        }\n      }\n    }\n\n    Model.prototype.getAttributes = function() {\n      var key, out, value;\n      out = {};\n      for (key in this) {\n        if (!hasProp.call(this, key)) continue;\n        value = this[key];\n        out[key] = value;\n      }\n      return out;\n    };\n\n    Model.prototype.toJSON = function() {\n      return this.getAttributes();\n    };\n\n    Model.prototype.toObject = function() {\n      return this.getAttributes();\n    };\n\n    Model.prototype.toString = function() {\n      return this.constructor.getDocType() + JSON.stringify(this.toJSON());\n    };\n\n    return Model;\n\n  })();\n\n  module.exports = Model;\n\n  castObject = require('./utils/type_checking').castObject;\n\n}).call(this);\n\n},{\"./utils/type_checking\":5}],4:[function(require,module,exports){\n// Generated by CoffeeScript 1.10.0\n(function() {\n  module.exports = {\n    get: function(path, id, callback) {\n      var xhr;\n      xhr = new XMLHttpRequest;\n      xhr.open('GET', '/ds-api/#{path}/#{id}', true);\n      xhr.onload = function() {\n        callback(null, xhr.response);\n      };\n      xhr.onerror = function(e) {\n        var err;\n        err = 'Request failed : #{e.target.status}';\n        callback(err);\n      };\n      xhr.setRequestHeader('Content-Type', 'application/json');\n      return xhr.send();\n    },\n    post: function(path, attributes, callback) {\n      var location, xhr;\n      location = window.location;\n      xhr = new XMLHttpRequest;\n      xhr.open('POST', \"/ds-api/\" + path, true);\n      xhr.onload = function() {\n        callback(null, xhr.response);\n      };\n      xhr.onerror = function(e) {\n        var err;\n        err = 'Request failed : #{e.target.status}';\n        callback(err);\n      };\n      return window.addEventListener('message', (function(event) {\n        var intent, requestHeader;\n        intent = event.data;\n        xhr.setRequestHeader('Content-Type', 'application/json');\n        requestHeader = 'Basic ' + btoa(intent.appName + \":\" + intent.token);\n        xhr.setRequestHeader('Authorization', requestHeader);\n        xhr.send(JSON.stringify(attributes));\n      }), true);\n    }\n  };\n\n}).call(this);\n\n},{}],5:[function(require,module,exports){\n(function (process){\n// Generated by CoffeeScript 1.10.0\n(function() {\n  var Model, NoSchema, _default, _isArray, _isMap, _toString, castObject, castValue, log, ref, reportCastIgnore,\n    hasProp = {}.hasOwnProperty,\n    indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\n\n  log = require('printit')({\n    prefix: 'Cozy DB'\n  });\n\n  _toString = function(x) {\n    return Object.prototype.toString.call(x);\n  };\n\n  _isArray = Array.isArray || function(x) {\n    return '[object Array]' === _toString(x);\n  };\n\n  _isMap = function(x) {\n    return '[object Object]' === _toString(x);\n  };\n\n  _default = function(value, defaultValue, lastDefault) {\n    if (value !== void 0) {\n      return value;\n    } else if (defaultValue !== void 0) {\n      return defaultValue;\n    } else {\n      return lastDefault;\n    }\n  };\n\n  exports.NoSchema = NoSchema = {\n    symbol: 'NoSchema'\n  };\n\n  exports.castValue = castValue = function(value, typeOrOptions) {\n    var arrayType, defaultValue, i, item, key, len, out, pvalue, result, type;\n    if (typeOrOptions.type) {\n      type = typeOrOptions.type;\n      defaultValue = typeOrOptions['default'];\n    } else {\n      type = typeOrOptions;\n      defaultValue = void 0;\n    }\n    if (value === void 0 || value === null) {\n      if (_isArray(type)) {\n        return [];\n      } else {\n        return defaultValue;\n      }\n    }\n    if (type === NoSchema) {\n      out = value;\n    } else if (type === Date) {\n      value = _default(value, defaultValue, void 0);\n      out = new Date(value);\n    } else if (type === String) {\n      value = _default(value, defaultValue, void 0);\n      out = String(value);\n    } else if (type === Boolean) {\n      value = _default(value, defaultValue, void 0);\n      out = Boolean(value);\n    } else if (type === Number) {\n      value = _default(value, defaultValue, void 0);\n      out = Number(value);\n    } else if (type === Object) {\n      out = {};\n      for (key in value) {\n        if (!hasProp.call(value, key)) continue;\n        pvalue = value[key];\n        out[key] = pvalue;\n      }\n    } else if (type.prototype instanceof Model) {\n      out = type.cast(value);\n    } else if (_isArray(type)) {\n      if (!type[0]) {\n        throw WrongShemaError('empty array');\n      }\n      value = _default(value, defaultValue, []);\n      arrayType = type[0];\n      result = [];\n      if ((value != null) && typeof value !== 'string') {\n        for (i = 0, len = value.length; i < len; i++) {\n          item = value[i];\n          result.push(castValue(item, arrayType));\n        }\n      }\n      return result;\n    } else if (typeof type === 'function') {\n      return type(value);\n    } else {\n      throw WrongShemaError(\"unsuported type \", type);\n    }\n    return out;\n  };\n\n  reportCastIgnore = ((ref = process.env.NODE_ENV) !== 'production' && ref !== 'test') || process.env.NO_CAST_WARNING;\n\n  exports.castObject = castObject = function(raw, schema, target, name) {\n    var handled, prop, typeOrOptions, value;\n    if (target == null) {\n      target = {};\n    }\n    handled = [];\n    if (schema === NoSchema) {\n      for (prop in raw) {\n        value = raw[prop];\n        target[prop] = value;\n      }\n      return target;\n    }\n    for (prop in schema) {\n      if (!hasProp.call(schema, prop)) continue;\n      typeOrOptions = schema[prop];\n      target[prop] = castValue(raw[prop], typeOrOptions);\n      if (reportCastIgnore) {\n        handled.push(prop);\n      }\n    }\n    if (reportCastIgnore) {\n      for (prop in raw) {\n        if (!hasProp.call(raw, prop)) continue;\n        value = raw[prop];\n        if (indexOf.call(handled, prop) < 0) {\n          log.warn(\"Warning : cast ignored property '\" + prop + \"' on '\" + name + \"'\");\n        }\n      }\n      return target;\n    }\n  };\n\n  Model = require('../model');\n\n}).call(this);\n\n}).call(this,require('_process'))\n},{\"../model\":3,\"_process\":8,\"printit\":7}],6:[function(require,module,exports){\n/*\n* @version  0.5.0\n* @author   Lauri Rooden - https://github.com/litejs/date-format-lite\n* @license  MIT License  - http://lauri.rooden.ee/mit-license.txt\n*/\n\n\n!function(Date, proto) {\n\tvar maskRe = /([\"'])((?:[^\\\\]|\\\\.)*?)\\1|YYYY|([MD])\\3\\3(\\3?)|SS|([YMDHhmsW])(\\5?)|[uUAZSwo]/g\n\t, yearFirstRe = /(\\d{4})[-.\\/](\\d\\d?)[-.\\/](\\d\\d?)/\n\t, dateFirstRe = /(\\d\\d?)[-.\\/](\\d\\d?)[-.\\/](\\d{4})/\n\t, timeRe = /(\\d\\d?):(\\d\\d):?(\\d\\d)?\\.?(\\d{3})?(?:\\s*(?:(a)|(p))\\.?m\\.?)?(\\s*(?:Z|GMT|UTC)?(?:([-+]\\d\\d):?(\\d\\d)?)?)?/i\n\t, wordRe = /.[a-z]+/g\n\t, unescapeRe = /\\\\(.)/g\n\n\t// ISO 8601 specifies numeric representations of date and time.\n\t//\n\t// The international standard date notation is\n\t// YYYY-MM-DD\n\t//\n\t// The international standard notation for the time of day is\n\t// hh:mm:ss\n\t//\n\t// Time zone\n\t//\n\t// The strings +hh:mm, +hhmm, or +hh (ahead of UTC)\n\t// -hh:mm, -hhmm, or -hh (time zones west of the zero meridian, which are behind UTC)\n\t//\n\t// 12:00Z = 13:00+01:00 = 0700-0500\n\n\tDate[proto].format = function(mask) {\n\t\tmask = Date.masks[mask] || mask || Date.masks[\"default\"]\n\n\t\tvar self = this\n\t\t, get = \"get\" + (mask.slice(0,4) == \"UTC:\" ? (mask=mask.slice(4), \"UTC\"):\"\")\n\n\t\treturn mask.replace(maskRe, function(match, quote, text, MD, MD4, single, pad) {\n\t\t\ttext = single == \"Y\"   ? self[get + \"FullYear\"]() % 100\n\t\t\t\t : match == \"YYYY\" ? self[get + \"FullYear\"]()\n\t\t\t\t : single == \"M\"   ? self[get + \"Month\"]()+1\n\t\t\t\t : MD     == \"M\" ? Date.monthNames[ self[get + \"Month\"]()+(MD4 ? 12 : 0) ]\n\t\t\t\t : single == \"D\"   ? self[get + \"Date\"]()\n\t\t\t\t : MD     == \"D\" ? Date.dayNames[ self[get + \"Day\"]() + (MD4 ? 7:0 ) ]\n\t\t\t\t : single == \"H\"   ? self[get + \"Hours\"]() % 12 || 12\n\t\t\t\t : single == \"h\"   ? self[get + \"Hours\"]()\n\t\t\t\t : single == \"m\"   ? self[get + \"Minutes\"]()\n\t\t\t\t : single == \"s\"   ? self[get + \"Seconds\"]()\n\t\t\t\t : match == \"S\"    ? self[get + \"Milliseconds\"]()\n\t\t\t\t : match == \"SS\"   ? (quote = self[get + \"Milliseconds\"](), quote > 99 ? quote : (quote > 9 ? \"0\" : \"00\" ) + quote)\n\t\t\t\t : match == \"u\"    ? (self/1000)>>>0\n\t\t\t\t : match == \"U\"    ? +self\n\t\t\t\t : match == \"A\"    ? Date[self[get + \"Hours\"]() > 11 ? \"pm\" : \"am\"]\n\t\t\t\t : match == \"Z\"    ? \"GMT \" + (-self.getTimezoneOffset()/60)\n\t\t\t\t : match == \"w\"    ? self[get + \"Day\"]() || 7\n\t\t\t\t : single == \"W\"   ? (quote = new Date(+self + ((4 - (self[get + \"Day\"]()||7)) * 86400000)), Math.ceil(((quote.getTime()-quote[\"s\" + get.slice(1) + \"Month\"](0,1)) / 86400000 + 1 ) / 7) )\n\t\t\t\t : match == \"o\"    ? new Date(+self + ((4 - (self[get + \"Day\"]()||7)) * 86400000))[get + \"FullYear\"]()\n\t\t\t\t : quote           ? text.replace(unescapeRe, \"$1\")\n\t\t\t\t : match\n\t\t\treturn pad && text < 10 ? \"0\"+text : text\n\t\t})\n\t}\n\n\tDate.am = \"AM\"\n\tDate.pm = \"PM\"\n\n\tDate.masks = {\"default\":\"DDD MMM DD YYYY hh:mm:ss\",\"isoUtcDateTime\":'UTC:YYYY-MM-DD\"T\"hh:mm:ss\"Z\"'}\n\tDate.monthNames = \"JanFebMarAprMayJunJulAugSepOctNovDecJanuaryFebruaryMarchAprilMayJuneJulyAugustSeptemberOctoberNovemberDecember\".match(wordRe)\n\tDate.dayNames = \"SunMonTueWedThuFriSatSundayMondayTuesdayWednesdayThursdayFridaySaturday\".match(wordRe)\n\n\t//*/\n\n\n\t/*\n\t* // In Chrome Date.parse(\"01.02.2001\") is Jan\n\t* n = +self || Date.parse(self) || \"\"+self;\n\t*/\n\n\tString[proto].date = Number[proto].date = function(format) {\n\t\tvar m, temp\n\t\t, d = new Date\n\t\t, n = +this || \"\"+this\n\n\t\tif (isNaN(n)) {\n\t\t\t// Big endian date, starting with the year, eg. 2011-01-31\n\t\t\tif (m = n.match(yearFirstRe)) d.setFullYear(m[1], m[2]-1, m[3])\n\n\t\t\telse if (m = n.match(dateFirstRe)) {\n\t\t\t\t// Middle endian date, starting with the month, eg. 01/31/2011\n\t\t\t\t// Little endian date, starting with the day, eg. 31.01.2011\n\t\t\t\ttemp = Date.middle_endian ? 1 : 2\n\t\t\t\td.setFullYear(m[3], m[temp]-1, m[3-temp])\n\t\t\t}\n\n\t\t\t// Time\n\t\t\tm = n.match(timeRe) || [0, 0, 0]\n\t\t\td.setHours( m[6] && m[1] < 12 ? +m[1]+12 : m[5] && m[1] == 12 ? 0 : m[1], m[2], m[3]|0, m[4]|0)\n\t\t\t// Timezone\n\t\t\tif (m[7]) {\n\t\t\t\td.setTime(d-((d.getTimezoneOffset() + (m[8]|0)*60 + ((m[8]<0?-1:1)*(m[9]|0)))*60000))\n\t\t\t}\n\t\t} else d.setTime( n < 4294967296 ? n * 1000 : n )\n\t\treturn format ? d.format(format) : d\n\t}\n\n}(Date, \"prototype\")\n\n\n\n\n\n},{}],7:[function(require,module,exports){\n(function (process){\n// Generated by CoffeeScript 1.10.0\nvar Logger, colors, dateFormat, levelColors,\n  slice = [].slice;\n\ndateFormat = require('./date-format');\n\nmodule.exports = function(options) {\n  return new Logger(options);\n};\n\ncolors = {\n  blue: ['\\x1B[34m', '\\x1B[39m'],\n  cyan: ['\\x1B[36m', '\\x1B[39m'],\n  green: ['\\x1B[32m', '\\x1B[39m'],\n  magenta: ['\\x1B[36m', '\\x1B[39m'],\n  red: ['\\x1B[31m', '\\x1B[39m'],\n  yellow: ['\\x1B[33m', '\\x1B[39m']\n};\n\nlevelColors = {\n  error: colors.red,\n  debug: colors.green,\n  warn: colors.yellow,\n  info: colors.blue\n};\n\nLogger = (function() {\n  function Logger(options1) {\n    this.options = options1;\n    if (this.options == null) {\n      this.options = {};\n    }\n    if (this.options.date && (this.options.dateFormat == null)) {\n      this.options.dateFormat = 'YYYY-MM-DD hh:mm:ss:S';\n    }\n  }\n\n  Logger.prototype.colorify = function(text, color) {\n    return \"\" + color[0] + text + color[1];\n  };\n\n  Logger.prototype.stringify = function(text) {\n    if (text.stack && text instanceof Error) {\n      text = text.stack;\n    } else if (text instanceof Object) {\n      text = JSON.stringify(text);\n    }\n    return text;\n  };\n\n  Logger.prototype.getFileAndLine = function() {\n    var browserReg, fileAndLineInfos, filePath, firstLineStack, line, nodeReg, stacklist;\n    stacklist = (new Error()).stack.split('\\n').slice(4);\n    nodeReg = /at\\s+(.*)\\s+\\((.*):(\\d*):(\\d*)\\)/gi;\n    browserReg = /at\\s+()(.*):(\\d*):(\\d*)/gi;\n    firstLineStack = stacklist[0];\n    fileAndLineInfos = nodeReg.exec(firstLineStack) || browserReg.exec(firstLineStack);\n    filePath = fileAndLineInfos[2].substr(process.cwd().length);\n    line = fileAndLineInfos[3];\n    return \".\" + filePath + \":\" + line + \" |\";\n  };\n\n  Logger.prototype.format = function(level, texts) {\n    var date, text;\n    if (process.env.DEBUG) {\n      texts.unshift(this.getFileAndLine());\n    }\n    text = ((function() {\n      var i, len, results;\n      results = [];\n      for (i = 0, len = texts.length; i < len; i++) {\n        text = texts[i];\n        results.push(this.stringify(text));\n      }\n      return results;\n    }).call(this)).join(\" \");\n    if (this.options.prefix != null) {\n      text = this.options.prefix + \" | \" + text;\n    }\n    if (process.env.NODE_ENV !== 'production') {\n      level = this.colorify(level, levelColors[level]);\n    }\n    if (level) {\n      text = level + \" - \" + text;\n    }\n    if (this.options.date) {\n      date = new Date().format(this.options.dateFormat);\n      text = \"[\" + date + \"] \" + text;\n    }\n    return text;\n  };\n\n  Logger.prototype.info = function() {\n    var texts;\n    texts = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n    if (process.env.DEBUG || process.env.NODE_ENV !== 'test') {\n      return console.info(this.format('info', texts));\n    }\n  };\n\n  Logger.prototype.warn = function() {\n    var texts;\n    texts = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n    if (process.env.DEBUG || process.env.NODE_ENV !== 'test') {\n      console.info(this.format('warn', texts));\n      return console.warn(this.format('warn', texts));\n    }\n  };\n\n  Logger.prototype.error = function() {\n    var texts;\n    texts = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n    if (process.env.DEBUG || process.env.NODE_ENV !== 'test') {\n      console.info(this.format('error', texts));\n      return console.error(this.format('error', texts));\n    }\n  };\n\n  Logger.prototype.debug = function() {\n    var texts;\n    texts = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n    if (process.env.DEBUG) {\n      return console.info(this.format('debug', texts));\n    }\n  };\n\n  Logger.prototype.raw = function() {\n    var texts;\n    texts = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n    return console.log.apply(console, texts);\n  };\n\n  Logger.prototype.lineBreak = function(text) {\n    return this.raw(Array(80).join(\"*\"));\n  };\n\n  return Logger;\n\n})();\n\n}).call(this,require('_process'))\n},{\"./date-format\":6,\"_process\":8}],8:[function(require,module,exports){\n// shim for using process in browser\n\nvar process = module.exports = {};\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = setTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    clearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        setTimeout(drainQueue, 0);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n},{}]},{},[2])(2)\n});","HomeAngCtrl = ($scope, $injector, $rootScope, $q) ->\n  vm = this\n\n  add = (user) ->\n    console.log 'create contact'\n    Contact = cozydb.getModel('Contact',\n      fn: String\n      n: String\n      org: String\n      title: String\n      department: String\n      bday: String\n      nickname: String\n      url: String\n      note: String)\n    Contact.create user, (err, res) ->\n      if err\n        alert err\n      else\n        console.log 'Contact.create'\n        console.log res\n        Contact.find (err, response) ->\n          console.log '//////////////////'\n          console.log response\n          console.log '//////////////////'\n          return\n        $scope.$apply ->\n          $scope.contacts = res\n          vm.contacts = res\n          return\n      return\n    console.log 'END CONTACT'\n    return\n\n  vm.add = add\n  return\n\nangular.module('browserapp').controller 'HomeAngCtrl', HomeAngCtrl\nHomeAngCtrl.$inject = [\n  '$scope'\n  '$injector'\n  '$rootScope'\n  '$q'\n]"]}